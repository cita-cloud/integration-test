apiVersion: v1
kind: ConfigMap
data:
  config.toml: |+
    [network_zenoh]
    ca_cert = """
    -----BEGIN CERTIFICATE-----
    MIIBdDCCARqgAwIBAgIUC4gZT6md4N9WAoaICVIYKiI6TbAwCgYIKoZIzj0EAwIw
    HzEQMA4GA1UECgwHQ0lUQUh1YjELMAkGA1UEAxMCQ0EwIBcNNzUwMTAxMDAwMDAw
    WhgPNDA5NjAxMDEwMDAwMDBaMB8xEDAOBgNVBAoMB0NJVEFIdWIxCzAJBgNVBAMT
    AkNBMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAESoGAym1+EuPT0NbtS0Y0w3L2
    Fj58553L1vqDuYNcfPSPy1cMRWA38P+u70ZDwA2VS/njKSBgnxLmtQIcTM1/2KMy
    MDAwHQYDVR0OBBYEFAuIGU+pneDfVgKGiAlSGCoiOk2wMA8GA1UdEwEB/wQFMAMB
    Af8wCgYIKoZIzj0EAwIDSAAwRQIhAMPJC6PGmDPWdwCOITH2sCN5Ibp6fUZsvbRn
    LO0sFRd1AiBDQ/MHnWyNbtb3BdcbcRYqrMFNOoTefImIAdkyBS4myw==
    -----END CERTIFICATE-----
    """
    cert = """
    -----BEGIN CERTIFICATE-----
    MIIBeTCCAR+gAwIBAgIUIsQhKBCMzJ8/syga6GaplLvNc/owCgYIKoZIzj0EAwIw
    HzEQMA4GA1UECgwHQ0lUQUh1YjELMAkGA1UEAxMCQ0EwIBcNNzUwMTAxMDAwMDAw
    WhgPNDA5NjAxMDEwMDAwMDBaMDIxEDAOBgNVBAoMB0NJVEFIdWIxHjAcBgNVBAMT
    FXRlc3QtY2hhaW4tcmFmdC1ub2RlNDBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IA
    BFn8rdGVOUIu9WfbfiGxdQ00D4e7je3ulrbHLxuiw8Stt+ULahX9XitQk2ttoUN/
    mgW2YA1klsRzH51SiAlonp2jJDAiMCAGA1UdEQQZMBeCFXRlc3QtY2hhaW4tcmFm
    dC1ub2RlNDAKBggqhkjOPQQDAgNIADBFAiEA9Y4JnHooo5Gl9vEkv2OEzlg1NGox
    Z3t6NgfwcMKBvbYCIGkVwUJ1dpMmEIR75oyPrmk6ZLWr+FEjXk6rsrsuU2DC
    -----END CERTIFICATE-----
    """
    chain_id = "dc4257d3bdc69554939072abac52e72b6c4a0b8d00c6fda5bc1bacbc5a4cb00f"
    domain = "test-chain-raft-node4"
    enable_metrics = true
    grpc_port = 50000
    metrics_port = 60000
    node_address = "/mnt/node_address"
    port = 40000
    priv_key = """
    -----BEGIN PRIVATE KEY-----
    MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQgJk5ZubnSniy5ssV9
    65Ngd3uCXrACAJbQ/CIKLQ0+hauhRANCAARZ/K3RlTlCLvVn234hsXUNNA+Hu43t
    7pa2xy8bosPErbflC2oV/V4rUJNrbaFDf5oFtmANZJbEcx+dUogJaJ6d
    -----END PRIVATE KEY-----
    """
    protocol = "quic"
    validator_address = "/mnt/validator_address"

    [[network_zenoh.modules]]
    hostname = "127.0.0.1"
    module_name = "consensus"
    port = 50001

    [[network_zenoh.modules]]
    hostname = "127.0.0.1"
    module_name = "controller"
    port = 50004

    [[network_zenoh.peers]]
    domain = "test-chain-raft-node0"
    port = 40000
    protocol = "quic"

    [[network_zenoh.peers]]
    domain = "test-chain-raft-node1"
    port = 40000
    protocol = "quic"

    [[network_zenoh.peers]]
    domain = "test-chain-raft-node2"
    port = 40000
    protocol = "quic"

    [[network_zenoh.peers]]
    domain = "test-chain-raft-node3"
    port = 40000
    protocol = "quic"

    [network_zenoh.log_config]
    filter = "info"
    max_level = "info"
    service_name = "network"

    [consensus_raft]
    controller_port = 50004
    enable_metrics = true
    grpc_listen_port = 50001
    metrics_port = 60001
    network_port = 50000
    node_addr = "/mnt/node_address"

    [executor_evm]
    domain = "test-chain-raft-node4"
    enable_metrics = true
    executor_port = 50002
    metrics_port = 60002

    [executor_evm.log_config]
    filter = "info"
    max_level = "info"
    service_name = "executor"

    [storage_opendal]
    domain = "test-chain-raft-node4"
    enable_metrics = true
    metrics_port = 60003
    storage_port = 50003

    [storage_opendal.cloud_storage]
    access_key_id = "admin"
    bucket = "cita-cloud"
    endpoint = "http://minio:9000"
    root = "raft"
    secret_access_key = "testtest"
    service_type = "s3"

    [storage_opendal.log_config]
    filter = "info"
    max_level = "info"
    service_name = "storage"

    [genesis_block]
    prevhash = "0x0000000000000000000000000000000000000000000000000000000000000000"
    timestamp = 1708413768362

    [system_config]
    admin = "9bab5858df4a9e84ff3958884a01a4fce5e07edb"
    block_interval = 3
    block_limit = 100
    chain_id = "dc4257d3bdc69554939072abac52e72b6c4a0b8d00c6fda5bc1bacbc5a4cb00f"
    quota_limit = 1073741824
    validators = [
        "daeb81134eac4d85fa72cf2202f1cd0584cb3746",
        "222590cf16960477e0b805e8daab9c92f4f29d71",
        "1d1a0e8eab5f85b956dcffbe01b870e80aee4f62",
        "6e550f9cd33195bfc11bd0a6e0d4e46864f0f61a",
    ]
    version = 0

    [controller]
    consensus_port = 50001
    controller_port = 50004
    domain = "test-chain-raft-node4"
    enable_metrics = true
    executor_port = 50002
    is_danger = false
    metrics_port = 60004
    network_port = 50000
    node_address = "/mnt/node_address"
    storage_port = 50003
    validator_address = "/mnt/validator_address"

    [controller.log_config]
    filter = "info"
    max_level = "info"
    service_name = "controller"

metadata:
  labels:
    app.kubernetes.io/chain-name: test-chain-raft
    app.kubernetes.io/chain-node: test-chain-raft-node4
  name: test-chain-raft-node4-config
